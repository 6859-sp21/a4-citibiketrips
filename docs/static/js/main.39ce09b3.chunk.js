(this.webpackJsonpcitibike=this.webpackJsonpcitibike||[]).push([[0],{164:function(t,e){},252:function(t,e,i){},253:function(t,e,i){},277:function(t,e){},280:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),o=i(47),d=i.n(o),l=(i(252),i(253),i(145)),r=i(189),u=i(190),s=i(191),c=i(208),g=i(142),m=i(54),h=i(325),b=i(328),j=i(321),f=i(326),p=i(112),v=i(198),x=i.n(v),O=i(329),w=i(311),y=i(312),S=i(324),k=i(315),C=i(286),P=i(314),_=i(199),L=i.n(_),T=i(13);function F(t){var e=t.counts,i=t.resetFilter,o=Object(n.useState)(0),d=Object(m.a)(o,2),l=d[0],r=d[1];Object(n.useEffect)((function(){r((e/75960*100).toFixed(2))}),[e]);var u=Object(O.a)("div")({position:"absolute",zIndex:1,top:"2em",left:"2em",width:"33%"}),s=Object(O.a)("div")({color:"#dddddd",borderColor:"rgb(72,72,72)",padding:"1.5em",position:"",zIndex:1,height:"100%",width:"60%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:"rgb(48,48,48)",borderRadius:"10px"}),c=Object(O.a)("div")({color:"#dddddd",display:"block",fontSize:"1.2em",marginTop:"0.25em",marginBottom:"0.83em",marginLeft:0,marginRight:0,fontWeight:"bold"}),g=Object(w.a)((function(t){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{color:"#dddddd",background:"rgb(48,48,48)",border:"0px solid #000",padding:t.spacing(2,4,3)}}}))(),h=a.a.useState(!1),b=Object(m.a)(h,2),j=b[0],f=b[1];return Object(T.jsxs)("div",{children:[Object(T.jsx)(u,{children:Object(T.jsxs)(s,{children:[Object(T.jsx)(c,{children:"Percent of trips during this time"}),Object(T.jsxs)(c,{children:[l,"%"]}),Object(T.jsxs)("div",{children:[Object(T.jsx)(y.a,{variant:"contained",disableElevation:!0,onClick:i,color:"primary",children:"Reset Filter"}),Object(T.jsx)(P.a,{variant:"contained",disableElevation:!0,onClick:function(){f(!0)},color:"secondary",children:Object(T.jsx)(L.a,{})})]})]})}),Object(T.jsx)("div",{children:Object(T.jsx)(S.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:g.modal,open:j,onClose:function(){f(!1)},closeAfterTransition:!0,BackdropComponent:k.a,BackdropProps:{timeout:500},children:Object(T.jsx)(C.a,{in:j,children:Object(T.jsxs)("div",{className:g.paper,children:[Object(T.jsx)("h2",{id:"transition-modal-title",children:"Help:"}),Object(T.jsxs)("ul",{children:[Object(T.jsx)("li",{children:"The map displays Citibike stations where bikes can be rented and returned."}),Object(T.jsx)("li",{children:"The colors of the columns designate if there is a net inflow or outflow of bikes at that station during the current time window."}),Object(T.jsx)("li",{children:"Green designates inflow of bikes to that station."}),Object(T.jsx)("li",{children:"Red designates outflow of bikes from that station."}),Object(T.jsx)("p",{}),Object(T.jsx)("li",{children:"Hovering on a station will adjust the map to show how where bikes to this originated from."}),Object(T.jsx)("p",{}),Object(T.jsx)("li",{children:"The time filter can be adjusted to view how bikes move throughout the day."}),Object(T.jsx)("li",{children:"The lock icon toggles the fixed/free filter size."}),Object(T.jsx)("li",{children:'The filter can be reset with the "Reset Filter" button.'})]}),Object(T.jsx)("p",{children:"Data courtesy of CitiBike: https://www.citibikenyc.com/system-data"})]})})})})]})}x.a.workerClass=i(276).default;function M(t){var e=t.width,i=t.height,n=t.viewState,o=t.onViewStateChange,d=t.stations,l=t.trips,r=t.time_filter,u=t.loading,s=t.isPlaying,c=(t.setHighlight,t.resetFilter),v=function(){var t={};return d.map((function(e){t[e.id]=0})),t},x=function(){var t=v(),e=0;return l.forEach((function(i){i.start_minutes>=r[0]&&i.start_minutes<=r[1]&&(e+=1,void 0===C?(t[i.end_id]+=1,t[i.start_id]-=1):i.start_id!==C&&i.end_id!==C||(t[i.start_id]-=1,t[i.end_id]+=1))})),t.highlight=e,t},O=[255,0,0],w=[0,255,0],y=[255,0,0,70],S=a.a.useState(void 0),k=Object(m.a)(S,2),C=k[0],P=k[1],_=a.a.useState(v()),L=Object(m.a)(_,2),M=L[0],H=L[1],A=a.a.useState(0),D=Object(m.a)(A,2),B=D[0],J=D[1];a.a.useEffect((function(){var t=x();console.log(),H(t),J(t.highlight)}),[C,u,r]);var I=[new h.a({id:"column-stations",data:d,pickable:!0,extrude:!0,opacity:.6,radiusMaxPixels:15,radius:50,getPosition:function(t){return[t.longitude,t.latitude]},getFillColor:function(t){return 0===M[t.id]?y:M[t.id]>0?w:O},elevationScale:2,getElevation:function(t){return Math.abs(M[t.id])},onHover:function(t){var e=t.object;e?P(e.id):(P(void 0),H(x()))},onClick:function(t){t.object},visible:!u,autoHighlight:!1,updateTriggers:{getFillColor:[M],getElevation:[M]},transitions:{getFillColor:{duration:s?0:500,easing:p.b},getElevation:{duration:s?0:500,easing:p.b}}}),new b.a({id:"arc-layer",data:l,getSourcePosition:function(t){return t.start_position},getTargetPosition:function(t){return t.end_position},getSourceColor:function(t){return M[t.start_id]>0?w:O},getTargetColor:function(t){return M[t.end_id]>0?w:O},visible:C,getFilterValue:function(t){return[t.start_minutes,t.start_id]},filterRange:[[r[0],r[1]],[C,C]],onFilteredItemsChange:function(t){H(x())},updateTriggers:{getSourceColor:[r,C,M],getTargetColor:[r,C,M]},extensions:[new f.a({filterSize:2,countItems:!0})]})];return Object(T.jsxs)("div",{children:[Object(T.jsx)(F,{counts:B,resetFilter:c}),Object(T.jsx)(g.b,{mapboxApiAccessToken:"pk.eyJ1IjoianpoYW5nNTYiLCJhIjoiY2tuMXhmNG44MTI1MzJ2bW9rbWhjNTM4YSJ9.Oukq6B1n9DOXpjfRZfUOJQ",width:e,height:i,viewState:n,onViewStateChange:o,mapStyle:"mapbox://styles/mapbox/dark-v9",children:Object(T.jsx)(j.a,{viewState:n,layers:I,getTooltip:function(t){var e=t.object;return e&&"      Station Name: ".concat(e.name,"\n      Net gain in bikes: ").concat(M[e.id])}})})]})}var H={3186:{name:"Grove St PATH",latitude:40.71958611647166,longitude:-74.0431174635887},3195:{name:"Sip Ave",latitude:40.73089709786179,longitude:-74.06391263008119},3199:{name:"Newport Pkwy",latitude:40.728744799999994,longitude:-74.03210820000001},3792:{name:"Columbus Dr at Exchange Pl",latitude:40.71687,longitude:-74.03281},3185:{name:"City Hall",latitude:40.717732500000004,longitude:-74.04384499999999},3275:{name:"Columbus Drive",latitude:40.71835519823214,longitude:-74.03891444206238},3639:{name:"Harborside",latitude:40.71925170000001,longitude:-74.034234},3276:{name:"Marin Light Rail",latitude:40.71458403535893,longitude:-74.04281705617905},3202:{name:"Newport PATH",latitude:40.7272235,longitude:-74.03375890000001},3211:{name:"Newark Ave",latitude:40.72152515,longitude:-74.046304543},3213:{name:"Van Vorst Park",latitude:40.71848892,longitude:-74.047726625},3640:{name:"Journal Square",latitude:40.733670000000004,longitude:-74.0625},3187:{name:"Warren St",latitude:40.721123600000006,longitude:-74.03805095},3203:{name:"Hamilton Park",latitude:40.727595965999996,longitude:-74.044247311},3207:{name:"Oakland Ave",latitude:40.7376037,longitude:-74.05247829999999},3678:{name:"Fairmount Ave",latitude:40.72572613742557,longitude:-74.07195925712584},3194:{name:"McGinley Square",latitude:40.7253399253558,longitude:-74.06762212514876},3206:{name:"Hilltop",latitude:40.7311689,longitude:-74.0575736},3225:{name:"Baldwin at Montgomery",latitude:40.7236589,longitude:-74.0641943},3220:{name:"5 Corners Library",latitude:40.73496102000952,longitude:-74.05950307846071},3196:{name:"Riverview Park",latitude:40.7443187,longitude:-74.04399090000001},3272:{name:"Jersey & 3rd",latitude:40.723331586464354,longitude:-74.04595255851744},3269:{name:"Brunswick & 6th",latitude:40.726011729646245,longitude:-74.0503889322281},3638:{name:"Washington St",latitude:40.7242941,longitude:-74.0354826},3278:{name:"Monmouth and 6th",latitude:40.72568548362901,longitude:-74.0487903356552},3273:{name:"Manila & 1st",latitude:40.72165072487999,longitude:-74.04288411140442},3279:{name:"Dixon Mills",latitude:40.72163014263835,longitude:-74.04996782541275},3270:{name:"Jersey & 6th St",latitude:40.72528910781132,longitude:-74.04557168483734},3205:{name:"JC Medical Center",latitude:40.71653978099194,longitude:-74.0496379137039},3209:{name:"Brunswick St",latitude:40.7241765,longitude:-74.05065640000001},3267:{name:"Morris Canal",latitude:40.7124188237569,longitude:-74.03852552175522},3212:{name:"Christ Hospital",latitude:40.734785818,longitude:-74.050443636},3184:{name:"Paulus Hook",latitude:40.7141454,longitude:-74.0335519},3681:{name:"Grand St",latitude:40.71517767732029,longitude:-74.03768330812454},3679:{name:"Bergen Ave",latitude:40.72210378668603,longitude:-74.07145500183104},3483:{name:"Montgomery St",latitude:40.71942,longitude:-74.05099},3280:{name:"Astor Place",latitude:40.71928220070703,longitude:-74.07126188278198},3214:{name:"Essex Light Rail",latitude:40.712774200000005,longitude:-74.03648570000001},3791:{name:"Hoboken Ave at Monmouth St",latitude:40.73520838045357,longitude:-74.04696375131606},3481:{name:"York St",latitude:40.71649,longitude:-74.04105},3193:{name:"Lincoln Park",latitude:40.7246050998869,longitude:-74.07840594649316},3677:{name:"Glenwood Ave",latitude:40.72755146730012,longitude:-74.07106071710588},3268:{name:"Lafayette Park",latitude:40.71346382669195,longitude:-74.06285852193831},3281:{name:"Leonard Gordon Park",latitude:40.74590996631558,longitude:-74.05727148056029},3210:{name:"Pershing Field",latitude:40.742677141,longitude:-74.051788633},3201:{name:"Dey St",latitude:40.737711,longitude:-74.066921},3694:{name:"Jackson Square",latitude:40.71113,longitude:-74.0789},3192:{name:"Liberty Light Rail",latitude:40.711242299999995,longitude:-74.0557013},3198:{name:"Heights Elevator",latitude:40.748715945380226,longitude:-74.04044330120088},3277:{name:"Communipaw & Berry Lane",latitude:40.71435836870427,longitude:-74.06661093235016},3191:{name:"Union St",latitude:40.71821129999999,longitude:-74.08363940000001},3426:{name:"JCBS Depot",latitude:40.70965083364061,longitude:-74.06860113143921}},A=[{name:"Grove St PATH",latitude:40.71958611647166,longitude:-74.0431174635887,id:3186},{name:"Sip Ave",latitude:40.73089709786179,longitude:-74.06391263008119,id:3195},{name:"Newport Pkwy",latitude:40.728744799999994,longitude:-74.03210820000001,id:3199},{name:"Columbus Dr at Exchange Pl",latitude:40.71687,longitude:-74.03281,id:3792},{name:"City Hall",latitude:40.717732500000004,longitude:-74.04384499999999,id:3185},{name:"Columbus Drive",latitude:40.71835519823214,longitude:-74.03891444206238,id:3275},{name:"Harborside",latitude:40.71925170000001,longitude:-74.034234,id:3639},{name:"Marin Light Rail",latitude:40.71458403535893,longitude:-74.04281705617905,id:3276},{name:"Newport PATH",latitude:40.7272235,longitude:-74.03375890000001,id:3202},{name:"Newark Ave",latitude:40.72152515,longitude:-74.046304543,id:3211},{name:"Van Vorst Park",latitude:40.71848892,longitude:-74.047726625,id:3213},{name:"Journal Square",latitude:40.733670000000004,longitude:-74.0625,id:3640},{name:"Warren St",latitude:40.721123600000006,longitude:-74.03805095,id:3187},{name:"Hamilton Park",latitude:40.727595965999996,longitude:-74.044247311,id:3203},{name:"Oakland Ave",latitude:40.7376037,longitude:-74.05247829999999,id:3207},{name:"Fairmount Ave",latitude:40.72572613742557,longitude:-74.07195925712584,id:3678},{name:"McGinley Square",latitude:40.7253399253558,longitude:-74.06762212514876,id:3194},{name:"Hilltop",latitude:40.7311689,longitude:-74.0575736,id:3206},{name:"Baldwin at Montgomery",latitude:40.7236589,longitude:-74.0641943,id:3225},{name:"5 Corners Library",latitude:40.73496102000952,longitude:-74.05950307846071,id:3220},{name:"Riverview Park",latitude:40.7443187,longitude:-74.04399090000001,id:3196},{name:"Jersey & 3rd",latitude:40.723331586464354,longitude:-74.04595255851744,id:3272},{name:"Brunswick & 6th",latitude:40.726011729646245,longitude:-74.0503889322281,id:3269},{name:"Washington St",latitude:40.7242941,longitude:-74.0354826,id:3638},{name:"Monmouth and 6th",latitude:40.72568548362901,longitude:-74.0487903356552,id:3278},{name:"Manila & 1st",latitude:40.72165072487999,longitude:-74.04288411140442,id:3273},{name:"Dixon Mills",latitude:40.72163014263835,longitude:-74.04996782541275,id:3279},{name:"Jersey & 6th St",latitude:40.72528910781132,longitude:-74.04557168483734,id:3270},{name:"JC Medical Center",latitude:40.71653978099194,longitude:-74.0496379137039,id:3205},{name:"Brunswick St",latitude:40.7241765,longitude:-74.05065640000001,id:3209},{name:"Morris Canal",latitude:40.7124188237569,longitude:-74.03852552175522,id:3267},{name:"Christ Hospital",latitude:40.734785818,longitude:-74.050443636,id:3212},{name:"Paulus Hook",latitude:40.7141454,longitude:-74.0335519,id:3184},{name:"Grand St",latitude:40.71517767732029,longitude:-74.03768330812454,id:3681},{name:"Bergen Ave",latitude:40.72210378668603,longitude:-74.07145500183104,id:3679},{name:"Montgomery St",latitude:40.71942,longitude:-74.05099,id:3483},{name:"Astor Place",latitude:40.71928220070703,longitude:-74.07126188278198,id:3280},{name:"Essex Light Rail",latitude:40.712774200000005,longitude:-74.03648570000001,id:3214},{name:"Hoboken Ave at Monmouth St",latitude:40.73520838045357,longitude:-74.04696375131606,id:3791},{name:"York St",latitude:40.71649,longitude:-74.04105,id:3481},{name:"Lincoln Park",latitude:40.7246050998869,longitude:-74.07840594649316,id:3193},{name:"Glenwood Ave",latitude:40.72755146730012,longitude:-74.07106071710588,id:3677},{name:"Lafayette Park",latitude:40.71346382669195,longitude:-74.06285852193831,id:3268},{name:"Leonard Gordon Park",latitude:40.74590996631558,longitude:-74.05727148056029,id:3281},{name:"Pershing Field",latitude:40.742677141,longitude:-74.051788633,id:3210},{name:"Dey St",latitude:40.737711,longitude:-74.066921,id:3201},{name:"Jackson Square",latitude:40.71113,longitude:-74.0789,id:3694},{name:"Liberty Light Rail",latitude:40.711242299999995,longitude:-74.0557013,id:3192},{name:"Heights Elevator",latitude:40.748715945380226,longitude:-74.04044330120088,id:3198},{name:"Communipaw & Berry Lane",latitude:40.71435836870427,longitude:-74.06661093235016,id:3277},{name:"Union St",latitude:40.71821129999999,longitude:-74.08363940000001,id:3191},{name:"JCBS Depot",latitude:40.70965083364061,longitude:-74.06860113143921,id:3426}],D=i.p+"static/media/all2020.6942c60b.csv",B=i(42),J=i(330),I=i(202),E=i.n(I),N=i(203),R=i.n(N),V=i(319),G=Object(O.a)("div")({position:"absolute",zIndex:1,bottom:"40px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),z=Object(O.a)("div")({position:"",zIndex:1,height:"120%",width:"60%",display:"flex",justifyContent:"center",alignItems:"center",background:"rgb(48,48,48)",borderRadius:"10px"}),W=Object(B.a)({root:{marginLeft:12,width:"80%"},valueLabel:{"& span":{background:"rgb(75,75,75)",color:"#ffffff"}}})(J.a);function q(t){var e=t.min,i=t.max,a=t.value,o=t.onChange,d=t.formatLabel,l=Object(n.useState)(!0),r=Object(m.a)(l,2),u=r[0],s=r[1],c=Object(n.useState)(a[1]-a[0]),g=Object(m.a)(c,2),h=g[0],b=g[1],j=function(t){var n=[a[0],a[1]];u?((n=t[1]===n[1]?[t[0],t[0]+h]:[t[1]-h,t[1]])[0]<e&&(n=[e,e+h]),n[1]>i&&(n=[i-h,i]),o(n)):o(t)};return Object(T.jsx)(G,{children:Object(T.jsxs)(z,{children:[Object(T.jsx)(V.a,{id:"time-filter",color:"secondary",children:"Time Filter"}),Object(T.jsx)(W,{color:"secondary",min:e,max:i,value:a,"aria-labelledby":"time-filter",onChange:function(t,e){return j(e)},valueLabelDisplay:"on",valueLabelFormat:d}),Object(T.jsx)(P.a,{color:"secondary",onClick:function(){s(!u),b(a[1]-a[0])},children:u?Object(T.jsx)(E.a,{title:"Lock Time Filter"}):Object(T.jsx)(R.a,{title:"Open Time Filter"})})]})})}var Y=i(320),U=i(204),X=i.n(U),Q=Object(w.a)((function(t){return{modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{color:"#dddddd",background:"rgb(48,48,48)",border:"0px solid #000",padding:t.spacing(2,4,3)}}}));function Z(t){var e=t.loading,i=Q(),n=a.a.useState(!0),o=Object(m.a)(n,2),d=o[0],l=o[1];return Object(T.jsx)("div",{children:Object(T.jsx)(S.a,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",className:i.modal,open:d,onClose:function(){e||l(!1)},closeAfterTransition:!0,BackdropComponent:k.a,BackdropProps:{timeout:500},children:Object(T.jsx)(C.a,{in:d,children:Object(T.jsxs)("div",{className:i.paper,children:[Object(T.jsx)("h2",{id:"transition-modal-title",children:"Welcome to Visualizing Citibikes!"}),Object(T.jsx)("p",{id:"transition-modal-description",children:"Explore how residents of Jersey City (neighbors of NYC) use the Citibikes bike share system throughout the day."}),Object(T.jsx)("p",{children:"Where do they come from? Where do they go? Let's find out!"}),Object(T.jsx)("p",{children:"Data courtesy of CitiBike: https://www.citibikenyc.com/system-data"}),e?Object(T.jsxs)("div",{children:["The data is loading, please wait. ",Object(T.jsx)(Y.a,{})]}):Object(T.jsx)("div",{children:Object(T.jsxs)("p",{children:["Loading complete. Click outside to continue ",Object(T.jsx)(X.a,{})]})})]})})})})}var K={longitude:-73.9544312807859,latitude:40.737897096399855,zoom:11},$={latitude:40.725779443680345,longitude:-74.05589375312678,zoom:13,bearing:.8015740858150702,pitch:40.9},tt=function(t){Object(s.a)(i,t);var e=Object(c.a)(i);function i(t){var n;return Object(r.a)(this,i),(n=e.call(this,t)).setViewState=function(t){n.setState({viewState:t})},n.setFilter=function(t){n.setState({time_filter:t})},n.resetFilter=function(){n.setState({time_filter:[600,780]})},n.setHighlight=function(t,e){n.setState({highlightStation:t,highlightCount:e})},n.formatLabel=function(t){var e=("00"+Math.floor(t/60)).slice(-2),i=("00"+t%60).slice(-2);return"".concat(e,":").concat(i)},n.handleChangeViewState=function(t){var e=t.viewState;n.setViewState(e)},n.handleFlyTo=function(t){n.setViewState(Object(l.a)(Object(l.a)(Object(l.a)({},n.state.viewState),t),{},{transitionDuration:2e3,transitionInterpolator:new g.a}))},n.togglePlaying=function(){n.setState({playing:!n.state.playing})},n.state={viewState:K,station_info:H,stations:A,trips:[],loading:!0,time_filter:[600,780],playing:!1,highlightStation:void 0,highlightCount:0},n}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var t=this;Object(p.a)(D,(function(t){var e=new Date(t.starttime);return{duration:t.tripduration,start_datetime:t.starttime,start_time:e.toTimeString(),start_minutes:60*e.getHours()+e.getMinutes(),start_id:+t["start station id"],end_id:+t["end station id"],start_position:[+t["start station longitude"],+t["start station latitude"]],end_position:[+t["end station longitude"],+t["end station latitude"]]}})).then((function(e){var i=new Date("01-01-2020"),n=new Date("05-01-2020"),a=e.filter((function(e){return null!=e.start_position[0]&&null!=e.start_position[1]&&null!=e.end_position[0]&&null!=e.end_position[1]&&e.start_id in t.state.station_info&&e.end_id in t.state.station_info&&new Date(e.start_datetime)>i&&new Date(e.start_datetime)<n}));t.setState({trips:a,loading:!1})})).then((function(){t.handleFlyTo($)}))}},{key:"render",value:function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)(Z,{loading:this.state.loading}),Object(T.jsx)(M,{width:"100vw",height:"100vh",viewState:this.state.viewState,onViewStateChange:this.handleChangeViewState,stations:this.state.stations,trips:this.state.trips,toggle:this.state.toggle,time_filter:this.state.time_filter,loading:this.state.loading,isPlaying:this.state.playing,resetFilter:this.resetFilter}),Object(T.jsx)(q,{min:0,max:1439,value:this.state.time_filter,animationSpeed:20,formatLabel:this.formatLabel,onChange:this.setFilter,togglePlaying:this.togglePlaying})]})}}]),i}(n.Component),et=function(){return Object(T.jsx)(tt,{})},it=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,331)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,d=e.getTTFB;i(t),n(t),a(t),o(t),d(t)}))};d.a.render(Object(T.jsx)(a.a.StrictMode,{children:Object(T.jsx)(et,{})}),document.getElementById("root")),it()}},[[280,1,2]]]);
//# sourceMappingURL=main.39ce09b3.chunk.js.map