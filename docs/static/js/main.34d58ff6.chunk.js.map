{"version":3,"sources":["components/Legend.js","components/Map.js","stations.js","list_stations.js","components/all2020.csv","components/RangeInput.js","components/WelcomeModal.js","components/MapWrapper.js","App.js","reportWebVitals.js","index.js"],"names":["Legend","counts","resetFilter","useState","printCount","setPrintCount","useEffect","toFixed","PositionContainer","styled","position","zIndex","top","left","width","CenterContainer","color","borderColor","padding","height","display","flexDirection","justifyContent","alignItems","background","borderRadius","TextContainer","fontSize","marginTop","marginBottom","marginLeft","marginRight","fontWeight","classes","makeStyles","theme","modal","paper","border","spacing","useStyles","React","open","setOpen","Button","variant","disableElevation","onClick","IconButton","Modal","aria-labelledby","aria-describedby","className","onClose","closeAfterTransition","BackdropComponent","Backdrop","BackdropProps","timeout","Fade","in","id","mapboxgl","workerClass","require","default","Map","viewState","onViewStateChange","stations","trips","time_filter","loading","isPlaying","setHighlight","initCounters","zeros","forEach","s","filterChange","update","highlightCounter","element","start_minutes","undefined","selectedStation","end_id","start_id","red","green","neutral","setSelectedStation","counters","setCounters","highlightCount","setHighlightCount","res","console","log","layers","ColumnLayer","data","pickable","extrude","opacity","radiusMaxPixels","radius","getPosition","d","longitude","latitude","getFillColor","elevationScale","getElevation","Math","abs","onHover","object","visible","autoHighlight","updateTriggers","transitions","duration","easing","easeCubicInOut","ArcLayer","getSourcePosition","start_position","getTargetPosition","end_position","getSourceColor","getTargetColor","getFilterValue","filterRange","onFilteredItemsChange","x","extensions","DataFilterExtension","filterSize","countItems","mapboxApiAccessToken","mapStyle","getTooltip","name","station_info","3186","3195","3199","3792","3185","3275","3639","3276","3202","3211","3213","3640","3187","3203","3207","3678","3194","3206","3225","3220","3196","3272","3269","3638","3278","3273","3279","3270","3205","3209","3267","3212","3184","3681","3679","3483","3280","3214","3791","3481","3193","3677","3268","3281","3210","3201","3694","3192","3198","3277","3191","3426","list_stations","bottom","SliderInput","withStyles","root","valueLabel","Slider","RangeInput","min","max","value","onChange","formatLabel","lock","setLock","span","setSpan","localOnChange","newValue","updateValue","Typography","event","valueLabelDisplay","valueLabelFormat","title","WelcomeModal","CircularProgress","nyc","zoom","jc","bearing","pitch","MapWrapper","props","setViewState","setState","setFilter","filter","count","highlightStation","t","hour","floor","slice","minutes","handleChangeViewState","handleFlyTo","destination","state","transitionDuration","transitionInterpolator","FlyToInterpolator","togglePlaying","playing","csv","trip_data","Date","start_datetime","start_time","toTimeString","getHours","getMinutes","then","start_cut","stop_cut","filter_data","this","toggle","animationSpeed","Component","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.34d58ff6.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { styled, makeStyles } from \"@material-ui/core/styles\";\nimport Button from \"@material-ui/core/Button\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport IconHelp from \"@material-ui/icons/Help\";\n\nexport default function Legend({ counts, resetFilter }) {\n  const [printCount, setPrintCount] = useState(0);\n  useEffect(() => {\n    setPrintCount(((counts / 75960) * 100).toFixed(2));\n  }, [counts]);\n\n  const PositionContainer = styled(\"div\")({\n    position: \"absolute\",\n    zIndex: 1,\n    top: \"2em\",\n    left: \"2em\",\n    width: \"33%\",\n  });\n\n  const CenterContainer = styled(\"div\")({\n    color: \"#dddddd\",\n    borderColor: \"rgb(72,72,72)\",\n    padding: \"1.5em\",\n    position: \"\",\n    zIndex: 1,\n    height: \"100%\",\n    width: \"60%\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    background: \"rgb(48,48,48)\",\n    borderRadius: \"10px\",\n  });\n\n  const TextContainer = styled(\"div\")({\n    color: \"#dddddd\",\n    display: \"block\",\n    fontSize: \"1.2em\",\n    marginTop: \"0.25em\",\n    marginBottom: \"0.83em\",\n    marginLeft: 0,\n    marginRight: 0,\n    fontWeight: \"bold\",\n  });\n\n  const useStyles = makeStyles((theme) => ({\n    modal: {\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    paper: {\n      color: \"#dddddd\",\n      background: \"rgb(48,48,48)\",\n      border: \"0px solid #000\",\n      padding: theme.spacing(2, 4, 3),\n    },\n  }));\n\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <PositionContainer>\n        <CenterContainer>\n          <TextContainer>Percent of trips during this time</TextContainer>\n          <TextContainer>{printCount}%</TextContainer>\n          <div>\n            <Button\n              variant=\"contained\"\n              disableElevation\n              onClick={resetFilter}\n              color=\"primary\"\n            >\n              Reset Filter\n            </Button>\n            <IconButton\n              variant=\"contained\"\n              disableElevation\n              onClick={handleOpen}\n              color=\"secondary\"\n            >\n              <IconHelp />\n            </IconButton>\n          </div>\n        </CenterContainer>\n      </PositionContainer>\n      <div>\n        <Modal\n          aria-labelledby=\"transition-modal-title\"\n          aria-describedby=\"transition-modal-description\"\n          className={classes.modal}\n          open={open}\n          onClose={handleClose}\n          closeAfterTransition\n          BackdropComponent={Backdrop}\n          BackdropProps={{\n            timeout: 500,\n          }}\n        >\n          <Fade in={open}>\n            <div className={classes.paper}>\n              <h2 id=\"transition-modal-title\">Help:</h2>\n              <ul>\n                <li>\n                  The map displays Citibike stations where bikes can be rented\n                  and returned.\n                </li>\n                <li>\n                  The colors of the columns designate if there is a net inflow\n                  or outflow of bikes at that station during the current time\n                  window.\n                </li>\n                <li>Green designates inflow of bikes to that station.</li>\n                <li>Red designates outflow of bikes from that station.</li>\n                <p></p>\n                <li>\n                  Hovering on a station will adjust the map to show how where\n                  bikes to this originated from.\n                </li>\n                <p></p>\n                <li>\n                  The time filter can be adjusted to view how bikes move\n                  throughout the day.\n                </li>\n                <li>The lock icon toggles the fixed/free filter size.</li>\n                <li>The filter can be reset with the \"Reset Filter\" button.</li>\n              </ul>\n              <p>Data courtesy of CitiBike: https://www.citibikenyc.com/system-data</p>\n            </div>\n          </Fade>\n        </Modal>\n      </div>\n    </div>\n  );\n}\n","import React from \"react\";\nimport ReactMapGL from \"react-map-gl\";\nimport { ArcLayer, ColumnLayer, DeckGL } from \"deck.gl\";\nimport { DataFilterExtension } from \"@deck.gl/extensions\";\nimport { easeCubicInOut } from \"d3\";\nimport mapboxgl from \"mapbox-gl\"; // This is a dependency of react-map-gl even if you didn't explicitly install it\nimport Legend from \"./Legend\";\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nmapboxgl.workerClass = require(\"worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker\").default;\n\n// please be nice and don't misuse this token. Thanks\nconst MAPBOX_TOKEN =\n  \"pk.eyJ1IjoianpoYW5nNTYiLCJhIjoiY2tuMXhmNG44MTI1MzJ2bW9rbWhjNTM4YSJ9.Oukq6B1n9DOXpjfRZfUOJQ\";\n\nexport default function Map({\n  width,\n  height,\n  viewState,\n  onViewStateChange,\n  stations,\n  trips,\n  time_filter,\n  loading,\n  isPlaying,\n  setHighlight,\n  resetFilter,\n}) {\n  const initCounters = () => {\n    const zeros = {};\n    stations.forEach((s) => {\n      zeros[s.id] = 0;\n    });\n    return zeros;\n  };\n\n  const filterChange = () => {\n    const update = initCounters();\n    let highlightCounter = 0;\n    // const update = initCounters();\n    trips.forEach((element) => {\n      if (\n        element.start_minutes >= time_filter[0] &&\n        element.start_minutes <= time_filter[1]\n      ) {\n        highlightCounter += 1;\n        if (selectedStation === undefined) {\n          // get net flow if nothing is selected\n          update[element.end_id] += 1;\n          update[element.start_id] -= 1;\n        } else {\n          //  get net flow with respect to selected station\n          if (\n            element.start_id === selectedStation ||\n            element.end_id === selectedStation\n          ) {\n            update[element.start_id] -= 1;\n            update[element.end_id] += 1;\n          }\n        }\n      }\n    });\n    // console.log(update);\n    // if (init) setChange(change + 1);\n    update[\"highlight\"] = highlightCounter;\n    return update;\n  };\n\n  const red = [255, 0, 0];\n  const green = [0, 255, 0];\n  const neutral = [255, 0, 0, 70];\n\n  const [selectedStation, setSelectedStation] = React.useState(undefined);\n  const [counters, setCounters] = React.useState(initCounters());\n  const [highlightCount, setHighlightCount] = React.useState(0);\n\n  React.useEffect(() => {\n    const res = filterChange();\n    console.log();\n    setCounters(res);\n    setHighlightCount(res[\"highlight\"]);\n  }, [selectedStation, loading, time_filter]);\n\n  function getTooltip({ object }) {\n    return (\n      object &&\n      `\\\n      Station Name: ${object.name}\n      Net gain in bikes: ${counters[object.id]}`\n    );\n  }\n\n  const layers = [\n    new ColumnLayer({\n      id: \"column-stations\",\n      data: stations,\n      pickable: true,\n      extrude: true,\n      opacity: 0.6,\n      radiusMaxPixels: 15,\n      radius: 50,\n      getPosition: (d) => [d.longitude, d.latitude],\n      getFillColor: (d) => {\n        if (counters[d.id] === 0) return neutral;\n        return counters[d.id] > 0 ? green : red;\n      },\n      elevationScale: 2,\n      getElevation: (d) => {\n        // console.log(d);\n        return Math.abs(counters[d.id]);\n      },\n      onHover: ({ object }) => {\n        if (object) {\n          setSelectedStation(object.id);\n        } else {\n          setSelectedStation(undefined);\n          setCounters(filterChange());\n        }\n      },\n      onClick: ({ object }) => {\n        // console.log(object);\n      },\n      visible: !loading,\n      autoHighlight: false,\n      updateTriggers: {\n        getFillColor: [counters],\n        getElevation: [counters],\n      },\n      transitions: {\n        getFillColor: {\n          duration: isPlaying ? 0 : 500,\n          easing: easeCubicInOut,\n        },\n        getElevation: {\n          duration: isPlaying ? 0 : 500,\n          easing: easeCubicInOut,\n        },\n      },\n    }),\n    new ArcLayer({\n      id: \"arc-layer\",\n      data: trips,\n      getSourcePosition: (d) => d.start_position,\n      getTargetPosition: (d) => d.end_position,\n      getSourceColor: (d) => {\n        return counters[d.start_id] > 0 ? green : red;\n      },\n      getTargetColor: (d) => {\n        return counters[d.end_id] > 0 ? green : red;\n      },\n      visible: selectedStation,\n      getFilterValue: (d) => [d.start_minutes, d.start_id],\n      filterRange: [\n        [time_filter[0], time_filter[1]],\n        [selectedStation, selectedStation],\n      ],\n      onFilteredItemsChange: (x) => {\n        setCounters(filterChange());\n      },\n      updateTriggers: {\n        getSourceColor: [time_filter, selectedStation, counters],\n        getTargetColor: [time_filter, selectedStation, counters],\n      },\n      extensions: [\n        new DataFilterExtension({ filterSize: 2, countItems: true }),\n      ],\n    }),\n  ];\n\n  return (\n    <div>\n      <Legend counts={highlightCount} resetFilter={resetFilter} />\n      <ReactMapGL\n        mapboxApiAccessToken={MAPBOX_TOKEN}\n        width={width}\n        height={height}\n        viewState={viewState}\n        onViewStateChange={onViewStateChange}\n        mapStyle=\"mapbox://styles/mapbox/dark-v9\"\n      >\n        <DeckGL viewState={viewState} layers={layers} getTooltip={getTooltip} />\n      </ReactMapGL>\n    </div>\n  );\n}\n","// converted from stations.json\nexport const station_info = {\n  3186: {\n    name: \"Grove St PATH\",\n    latitude: 40.71958611647166,\n    longitude: -74.0431174635887,\n  },\n  3195: {\n    name: \"Sip Ave\",\n    latitude: 40.73089709786179,\n    longitude: -74.06391263008119,\n  },\n  3199: {\n    name: \"Newport Pkwy\",\n    latitude: 40.728744799999994,\n    longitude: -74.03210820000001,\n  },\n  3792: {\n    name: \"Columbus Dr at Exchange Pl\",\n    latitude: 40.71687,\n    longitude: -74.03281,\n  },\n  3185: {\n    name: \"City Hall\",\n    latitude: 40.717732500000004,\n    longitude: -74.04384499999999,\n  },\n  3275: {\n    name: \"Columbus Drive\",\n    latitude: 40.71835519823214,\n    longitude: -74.03891444206238,\n  },\n  3639: {\n    name: \"Harborside\",\n    latitude: 40.71925170000001,\n    longitude: -74.034234,\n  },\n  3276: {\n    name: \"Marin Light Rail\",\n    latitude: 40.71458403535893,\n    longitude: -74.04281705617905,\n  },\n  3202: {\n    name: \"Newport PATH\",\n    latitude: 40.7272235,\n    longitude: -74.03375890000001,\n  },\n  3211: { name: \"Newark Ave\", latitude: 40.72152515, longitude: -74.046304543 },\n  3213: {\n    name: \"Van Vorst Park\",\n    latitude: 40.71848892,\n    longitude: -74.047726625,\n  },\n  3640: {\n    name: \"Journal Square\",\n    latitude: 40.733670000000004,\n    longitude: -74.0625,\n  },\n  3187: {\n    name: \"Warren St\",\n    latitude: 40.721123600000006,\n    longitude: -74.03805095,\n  },\n  3203: {\n    name: \"Hamilton Park\",\n    latitude: 40.727595965999996,\n    longitude: -74.044247311,\n  },\n  3207: {\n    name: \"Oakland Ave\",\n    latitude: 40.7376037,\n    longitude: -74.05247829999999,\n  },\n  3678: {\n    name: \"Fairmount Ave\",\n    latitude: 40.72572613742557,\n    longitude: -74.07195925712584,\n  },\n  3194: {\n    name: \"McGinley Square\",\n    latitude: 40.7253399253558,\n    longitude: -74.06762212514876,\n  },\n  3206: { name: \"Hilltop\", latitude: 40.7311689, longitude: -74.0575736 },\n  3225: {\n    name: \"Baldwin at Montgomery\",\n    latitude: 40.7236589,\n    longitude: -74.0641943,\n  },\n  3220: {\n    name: \"5 Corners Library\",\n    latitude: 40.73496102000952,\n    longitude: -74.05950307846071,\n  },\n  3196: {\n    name: \"Riverview Park\",\n    latitude: 40.7443187,\n    longitude: -74.04399090000001,\n  },\n  3272: {\n    name: \"Jersey & 3rd\",\n    latitude: 40.723331586464354,\n    longitude: -74.04595255851744,\n  },\n  3269: {\n    name: \"Brunswick & 6th\",\n    latitude: 40.726011729646245,\n    longitude: -74.0503889322281,\n  },\n  3638: { name: \"Washington St\", latitude: 40.7242941, longitude: -74.0354826 },\n  3278: {\n    name: \"Monmouth and 6th\",\n    latitude: 40.72568548362901,\n    longitude: -74.0487903356552,\n  },\n  3273: {\n    name: \"Manila & 1st\",\n    latitude: 40.72165072487999,\n    longitude: -74.04288411140442,\n  },\n  3279: {\n    name: \"Dixon Mills\",\n    latitude: 40.72163014263835,\n    longitude: -74.04996782541275,\n  },\n  3270: {\n    name: \"Jersey & 6th St\",\n    latitude: 40.72528910781132,\n    longitude: -74.04557168483734,\n  },\n  3205: {\n    name: \"JC Medical Center\",\n    latitude: 40.71653978099194,\n    longitude: -74.0496379137039,\n  },\n  3209: {\n    name: \"Brunswick St\",\n    latitude: 40.7241765,\n    longitude: -74.05065640000001,\n  },\n  3267: {\n    name: \"Morris Canal\",\n    latitude: 40.7124188237569,\n    longitude: -74.03852552175522,\n  },\n  3212: {\n    name: \"Christ Hospital\",\n    latitude: 40.734785818,\n    longitude: -74.050443636,\n  },\n  3184: { name: \"Paulus Hook\", latitude: 40.7141454, longitude: -74.0335519 },\n  3681: {\n    name: \"Grand St\",\n    latitude: 40.71517767732029,\n    longitude: -74.03768330812454,\n  },\n  3679: {\n    name: \"Bergen Ave\",\n    latitude: 40.72210378668603,\n    longitude: -74.07145500183104,\n  },\n  3483: { name: \"Montgomery St\", latitude: 40.71942, longitude: -74.05099 },\n  3280: {\n    name: \"Astor Place\",\n    latitude: 40.71928220070703,\n    longitude: -74.07126188278198,\n  },\n  3214: {\n    name: \"Essex Light Rail\",\n    latitude: 40.712774200000005,\n    longitude: -74.03648570000001,\n  },\n  3791: {\n    name: \"Hoboken Ave at Monmouth St\",\n    latitude: 40.73520838045357,\n    longitude: -74.04696375131606,\n  },\n  3481: { name: \"York St\", latitude: 40.71649, longitude: -74.04105 },\n  3193: {\n    name: \"Lincoln Park\",\n    latitude: 40.7246050998869,\n    longitude: -74.07840594649316,\n  },\n  3677: {\n    name: \"Glenwood Ave\",\n    latitude: 40.72755146730012,\n    longitude: -74.07106071710588,\n  },\n  3268: {\n    name: \"Lafayette Park\",\n    latitude: 40.71346382669195,\n    longitude: -74.06285852193831,\n  },\n  3281: {\n    name: \"Leonard Gordon Park\",\n    latitude: 40.74590996631558,\n    longitude: -74.05727148056029,\n  },\n  3210: {\n    name: \"Pershing Field\",\n    latitude: 40.742677141,\n    longitude: -74.051788633,\n  },\n  3201: { name: \"Dey St\", latitude: 40.737711, longitude: -74.066921 },\n  3694: { name: \"Jackson Square\", latitude: 40.71113, longitude: -74.0789 },\n  3192: {\n    name: \"Liberty Light Rail\",\n    latitude: 40.711242299999995,\n    longitude: -74.0557013,\n  },\n  3198: {\n    name: \"Heights Elevator\",\n    latitude: 40.748715945380226,\n    longitude: -74.04044330120088,\n  },\n  3277: {\n    name: \"Communipaw & Berry Lane\",\n    latitude: 40.71435836870427,\n    longitude: -74.06661093235016,\n  },\n  3191: {\n    name: \"Union St\",\n    latitude: 40.71821129999999,\n    longitude: -74.08363940000001,\n  },\n  3426: {\n    name: \"JCBS Depot\",\n    latitude: 40.70965083364061,\n    longitude: -74.06860113143921,\n  },\n};\n","export const list_stations = [\n  {\n    name: \"Grove St PATH\",\n    latitude: 40.71958611647166,\n    longitude: -74.0431174635887,\n    id: 3186,\n  },\n  {\n    name: \"Sip Ave\",\n    latitude: 40.73089709786179,\n    longitude: -74.06391263008119,\n    id: 3195,\n  },\n  {\n    name: \"Newport Pkwy\",\n    latitude: 40.728744799999994,\n    longitude: -74.03210820000001,\n    id: 3199,\n  },\n  {\n    name: \"Columbus Dr at Exchange Pl\",\n    latitude: 40.71687,\n    longitude: -74.03281,\n    id: 3792,\n  },\n  {\n    name: \"City Hall\",\n    latitude: 40.717732500000004,\n    longitude: -74.04384499999999,\n    id: 3185,\n  },\n  {\n    name: \"Columbus Drive\",\n    latitude: 40.71835519823214,\n    longitude: -74.03891444206238,\n    id: 3275,\n  },\n  {\n    name: \"Harborside\",\n    latitude: 40.71925170000001,\n    longitude: -74.034234,\n    id: 3639,\n  },\n  {\n    name: \"Marin Light Rail\",\n    latitude: 40.71458403535893,\n    longitude: -74.04281705617905,\n    id: 3276,\n  },\n  {\n    name: \"Newport PATH\",\n    latitude: 40.7272235,\n    longitude: -74.03375890000001,\n    id: 3202,\n  },\n  {\n    name: \"Newark Ave\",\n    latitude: 40.72152515,\n    longitude: -74.046304543,\n    id: 3211,\n  },\n  {\n    name: \"Van Vorst Park\",\n    latitude: 40.71848892,\n    longitude: -74.047726625,\n    id: 3213,\n  },\n  {\n    name: \"Journal Square\",\n    latitude: 40.733670000000004,\n    longitude: -74.0625,\n    id: 3640,\n  },\n  {\n    name: \"Warren St\",\n    latitude: 40.721123600000006,\n    longitude: -74.03805095,\n    id: 3187,\n  },\n  {\n    name: \"Hamilton Park\",\n    latitude: 40.727595965999996,\n    longitude: -74.044247311,\n    id: 3203,\n  },\n  {\n    name: \"Oakland Ave\",\n    latitude: 40.7376037,\n    longitude: -74.05247829999999,\n    id: 3207,\n  },\n  {\n    name: \"Fairmount Ave\",\n    latitude: 40.72572613742557,\n    longitude: -74.07195925712584,\n    id: 3678,\n  },\n  {\n    name: \"McGinley Square\",\n    latitude: 40.7253399253558,\n    longitude: -74.06762212514876,\n    id: 3194,\n  },\n  { name: \"Hilltop\", latitude: 40.7311689, longitude: -74.0575736, id: 3206 },\n  {\n    name: \"Baldwin at Montgomery\",\n    latitude: 40.7236589,\n    longitude: -74.0641943,\n    id: 3225,\n  },\n  {\n    name: \"5 Corners Library\",\n    latitude: 40.73496102000952,\n    longitude: -74.05950307846071,\n    id: 3220,\n  },\n  {\n    name: \"Riverview Park\",\n    latitude: 40.7443187,\n    longitude: -74.04399090000001,\n    id: 3196,\n  },\n  {\n    name: \"Jersey & 3rd\",\n    latitude: 40.723331586464354,\n    longitude: -74.04595255851744,\n    id: 3272,\n  },\n  {\n    name: \"Brunswick & 6th\",\n    latitude: 40.726011729646245,\n    longitude: -74.0503889322281,\n    id: 3269,\n  },\n  {\n    name: \"Washington St\",\n    latitude: 40.7242941,\n    longitude: -74.0354826,\n    id: 3638,\n  },\n  {\n    name: \"Monmouth and 6th\",\n    latitude: 40.72568548362901,\n    longitude: -74.0487903356552,\n    id: 3278,\n  },\n  {\n    name: \"Manila & 1st\",\n    latitude: 40.72165072487999,\n    longitude: -74.04288411140442,\n    id: 3273,\n  },\n  {\n    name: \"Dixon Mills\",\n    latitude: 40.72163014263835,\n    longitude: -74.04996782541275,\n    id: 3279,\n  },\n  {\n    name: \"Jersey & 6th St\",\n    latitude: 40.72528910781132,\n    longitude: -74.04557168483734,\n    id: 3270,\n  },\n  {\n    name: \"JC Medical Center\",\n    latitude: 40.71653978099194,\n    longitude: -74.0496379137039,\n    id: 3205,\n  },\n  {\n    name: \"Brunswick St\",\n    latitude: 40.7241765,\n    longitude: -74.05065640000001,\n    id: 3209,\n  },\n  {\n    name: \"Morris Canal\",\n    latitude: 40.7124188237569,\n    longitude: -74.03852552175522,\n    id: 3267,\n  },\n  {\n    name: \"Christ Hospital\",\n    latitude: 40.734785818,\n    longitude: -74.050443636,\n    id: 3212,\n  },\n  {\n    name: \"Paulus Hook\",\n    latitude: 40.7141454,\n    longitude: -74.0335519,\n    id: 3184,\n  },\n  {\n    name: \"Grand St\",\n    latitude: 40.71517767732029,\n    longitude: -74.03768330812454,\n    id: 3681,\n  },\n  {\n    name: \"Bergen Ave\",\n    latitude: 40.72210378668603,\n    longitude: -74.07145500183104,\n    id: 3679,\n  },\n  { name: \"Montgomery St\", latitude: 40.71942, longitude: -74.05099, id: 3483 },\n  {\n    name: \"Astor Place\",\n    latitude: 40.71928220070703,\n    longitude: -74.07126188278198,\n    id: 3280,\n  },\n  {\n    name: \"Essex Light Rail\",\n    latitude: 40.712774200000005,\n    longitude: -74.03648570000001,\n    id: 3214,\n  },\n  {\n    name: \"Hoboken Ave at Monmouth St\",\n    latitude: 40.73520838045357,\n    longitude: -74.04696375131606,\n    id: 3791,\n  },\n  { name: \"York St\", latitude: 40.71649, longitude: -74.04105, id: 3481 },\n  {\n    name: \"Lincoln Park\",\n    latitude: 40.7246050998869,\n    longitude: -74.07840594649316,\n    id: 3193,\n  },\n  {\n    name: \"Glenwood Ave\",\n    latitude: 40.72755146730012,\n    longitude: -74.07106071710588,\n    id: 3677,\n  },\n  {\n    name: \"Lafayette Park\",\n    latitude: 40.71346382669195,\n    longitude: -74.06285852193831,\n    id: 3268,\n  },\n  {\n    name: \"Leonard Gordon Park\",\n    latitude: 40.74590996631558,\n    longitude: -74.05727148056029,\n    id: 3281,\n  },\n  {\n    name: \"Pershing Field\",\n    latitude: 40.742677141,\n    longitude: -74.051788633,\n    id: 3210,\n  },\n  { name: \"Dey St\", latitude: 40.737711, longitude: -74.066921, id: 3201 },\n  { name: \"Jackson Square\", latitude: 40.71113, longitude: -74.0789, id: 3694 },\n  {\n    name: \"Liberty Light Rail\",\n    latitude: 40.711242299999995,\n    longitude: -74.0557013,\n    id: 3192,\n  },\n  {\n    name: \"Heights Elevator\",\n    latitude: 40.748715945380226,\n    longitude: -74.04044330120088,\n    id: 3198,\n  },\n  {\n    name: \"Communipaw & Berry Lane\",\n    latitude: 40.71435836870427,\n    longitude: -74.06661093235016,\n    id: 3277,\n  },\n  {\n    name: \"Union St\",\n    latitude: 40.71821129999999,\n    longitude: -74.08363940000001,\n    id: 3191,\n  },\n  {\n    name: \"JCBS Depot\",\n    latitude: 40.70965083364061,\n    longitude: -74.06860113143921,\n    id: 3426,\n  },\n];\n","export default __webpack_public_path__ + \"static/media/all2020.6942c60b.csv\";","import React, { useState, useEffect } from \"react\";\nimport { styled, withStyles } from \"@material-ui/core/styles\";\nimport Slider from \"@material-ui/core/Slider\";\nimport Button from \"@material-ui/core/IconButton\";\nimport Lock from \"@material-ui/icons/Lock\";\nimport LockOpen from \"@material-ui/icons/LockOpen\";\nimport Typography from \"@material-ui/core/Typography\";\n\nconst PositionContainer = styled(\"div\")({\n  position: \"absolute\",\n  zIndex: 1,\n  bottom: \"40px\",\n  width: \"100%\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n});\n\nconst CenterContainer = styled(\"div\")({\n  position: \"\",\n  zIndex: 1,\n  // bottom: \"40px\",\n  height: \"120%\",\n  width: \"60%\",\n  display: \"flex\",\n  justifyContent: \"center\",\n  alignItems: \"center\",\n  background: \"rgb(48,48,48)\",\n  borderRadius: \"10px\",\n});\n\nconst SliderInput = withStyles({\n  root: {\n    marginLeft: 12,\n    width: \"80%\",\n  },\n  valueLabel: {\n    \"& span\": {\n      background: \"rgb(75,75,75)\",\n      color: \"#ffffff\",\n    },\n  },\n})(Slider);\n\nexport default function RangeInput({ min, max, value, onChange, formatLabel }) {\n  const [lock, setLock] = useState(true);\n  const [span, setSpan] = useState(value[1] - value[0]);\n\n  useEffect(() => {\n    setSpan(value[1] - value[0]);\n  }, value);\n\n  const localOnChange = (newValue) => {\n    let updateValue = [value[0], value[1]];\n    if (lock) {\n      if (newValue[1] === updateValue[1]) {\n        updateValue = [newValue[0], newValue[0] + span];\n      } else {\n        updateValue = [newValue[1] - span, newValue[1]];\n      }\n      if (updateValue[0] < min) {\n        updateValue = [min, min + span];\n      }\n      if (updateValue[1] > max) {\n        updateValue = [max - span, max];\n      }\n      onChange(updateValue);\n    } else {\n      onChange(newValue);\n    }\n  };\n\n  return (\n    <PositionContainer>\n      <CenterContainer>\n        <Typography id=\"time-filter\" color=\"secondary\">\n          Time Filter\n        </Typography>\n\n        <SliderInput\n          color=\"secondary\"\n          min={min}\n          max={max}\n          value={value}\n          aria-labelledby=\"time-filter\"\n          onChange={(event, newValue) => localOnChange(newValue)}\n          valueLabelDisplay=\"on\"\n          valueLabelFormat={formatLabel}\n        />\n\n        <Button\n          color=\"secondary\"\n          onClick={() => {\n            setLock(!lock);\n            setSpan(value[1] - value[0]);\n          }}\n        >\n          {lock ? (\n            <Lock title=\"Lock Time Filter\" />\n          ) : (\n            <LockOpen title=\"Open Time Filter\" />\n          )}\n        </Button>\n      </CenterContainer>\n    </PositionContainer>\n  );\n}\n","import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Modal from \"@material-ui/core/Modal\";\nimport Backdrop from \"@material-ui/core/Backdrop\";\nimport Fade from \"@material-ui/core/Fade\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport Done from \"@material-ui/icons/Done\";\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  paper: {\n    color: \"#dddddd\",\n    background: \"rgb(48,48,48)\",\n    border: \"0px solid #000\",\n    padding: theme.spacing(2, 4, 3),\n  },\n}));\n\nexport default function WelcomeModal({ loading }) {\n  const classes = useStyles();\n  const [open, setOpen] = React.useState(true);\n  \n  const handleClose = () => {\n    if (loading) return;\n    setOpen(false);\n  };\n\n  return (\n    <div>\n      <Modal\n        aria-labelledby=\"transition-modal-title\"\n        aria-describedby=\"transition-modal-description\"\n        className={classes.modal}\n        open={open}\n        onClose={handleClose}\n        closeAfterTransition\n        BackdropComponent={Backdrop}\n        BackdropProps={{\n          timeout: 500,\n        }}\n      >\n        <Fade in={open}>\n          <div className={classes.paper}>\n            <h2 id=\"transition-modal-title\">Welcome to Citibike Trips!</h2>\n            <p id=\"transition-modal-description\">\n              Explore how residents of Jersey City (neighbors of NYC) use the\n              Citibikes bike share system throughout the day.\n            </p>\n            <p>Where do they come from? Where do they go? Let's find out!</p>\n            <p>\n              Data courtesy of CitiBike: https://www.citibikenyc.com/system-data\n            </p>\n\n            {loading ? (\n              <div>\n                The data is loading, please wait. <CircularProgress />\n              </div>\n            ) : (\n              <div>\n                <p>\n                  Loading complete. Click outside to continue <Done />\n                </p>\n              </div>\n            )}\n          </div>\n        </Fade>\n      </Modal>\n    </div>\n  );\n}\n","import { React, Component } from \"react\";\nimport { FlyToInterpolator } from \"react-map-gl\";\nimport Map from \"./Map\";\nimport { station_info } from \"../stations\";\nimport { list_stations } from \"../list_stations\";\nimport { csv } from \"d3\";\nimport trip_data from \"./all2020.csv\";\nimport RangeInput from \"./RangeInput\";\nimport WelcomeModal from \"./WelcomeModal\";\n\nconst nyc = {\n  longitude: -73.9544312807859,\n  latitude: 40.737897096399855,\n  zoom: 11,\n};\n\nconst jc = {\n  latitude: 40.725779443680345,\n  longitude: -74.05589375312678,\n  zoom: 13,\n  bearing: 0.8015740858150702,\n  pitch: 40.9,\n};\n\nclass MapWrapper extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      viewState: nyc,\n      station_info: station_info,\n      stations: list_stations,\n      trips: [],\n      loading: true,\n      time_filter: [600, 780],\n      playing: false,\n      highlightStation: undefined,\n      highlightCount: 0,\n    };\n  }\n\n  setViewState = (viewState) => {\n    this.setState({ viewState });\n  };\n\n  setFilter = (filter) => {\n    this.setState({\n      time_filter: filter,\n    });\n  };\n\n  resetFilter = () => {\n    this.setState({\n      time_filter: [600, 780],\n    });\n  };\n\n  setHighlight = (name, count) => {\n    this.setState({\n      highlightStation: name,\n      highlightCount: count,\n    });\n  };\n\n  formatLabel = (t) => {\n    const hour = (\"00\" + Math.floor(t / 60)).slice(-2);\n    const minutes = (\"00\" + (t % 60)).slice(-2);\n    return `${hour}:${minutes}`;\n  };\n\n  handleChangeViewState = ({ viewState }) => {\n    this.setViewState(viewState);\n  };\n\n  handleFlyTo = (destination) => {\n    this.setViewState({\n      ...this.state.viewState,\n      ...destination,\n      transitionDuration: 2000,\n      transitionInterpolator: new FlyToInterpolator(),\n    });\n  };\n\n  togglePlaying = () => {\n    this.setState({\n      playing: !this.state.playing,\n    });\n  };\n\n  componentDidMount() {\n    csv(trip_data, function (d) {\n      const t = new Date(d[\"starttime\"]);\n      return {\n        duration: d[\"tripduration\"],\n        start_datetime: d[\"starttime\"],\n        start_time: t.toTimeString(),\n        start_minutes: t.getHours() * 60 + t.getMinutes(),\n        start_id: +d[\"start station id\"],\n        end_id: +d[\"end station id\"],\n        start_position: [\n          +d[\"start station longitude\"],\n          +d[\"start station latitude\"],\n        ],\n        end_position: [+d[\"end station longitude\"], +d[\"end station latitude\"]],\n      };\n    })\n      .then((data) => {\n        const start_cut = new Date(\"01-01-2020\");\n        const stop_cut = new Date(\"05-01-2020\");\n        const filter_data = data.filter(\n          (d) =>\n            d.start_position[0] != null &&\n            d.start_position[1] != null &&\n            d.end_position[0] != null &&\n            d.end_position[1] != null &&\n            d.start_id in this.state.station_info &&\n            d.end_id in this.state.station_info &&\n            new Date(d.start_datetime) > start_cut &&\n            new Date(d.start_datetime) < stop_cut\n        );\n        this.setState({\n          trips: filter_data,\n          loading: false,\n        });\n      })\n      .then(() => {\n        this.handleFlyTo(jc);\n      });\n  }\n\n  render() {\n    return (\n      <div>\n        <WelcomeModal loading={this.state.loading} />\n        <Map\n          width=\"100vw\"\n          height=\"100vh\"\n          viewState={this.state.viewState}\n          onViewStateChange={this.handleChangeViewState}\n          stations={this.state.stations}\n          trips={this.state.trips}\n          toggle={this.state.toggle}\n          time_filter={this.state.time_filter}\n          loading={this.state.loading}\n          isPlaying={this.state.playing}\n          resetFilter={this.resetFilter}\n        ></Map>\n        <RangeInput\n          min={0}\n          max={1439}\n          value={this.state.time_filter}\n          animationSpeed={20}\n          formatLabel={this.formatLabel}\n          onChange={this.setFilter}\n          togglePlaying={this.togglePlaying}\n        />\n      </div>\n    );\n  }\n}\n\nexport default MapWrapper;\n","import React from 'react';\nimport './App.css';\n\nimport MapWrapper from './components/MapWrapper';\n\n\nconst App = () => {\n  return(\n    <MapWrapper/>\n  )\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}