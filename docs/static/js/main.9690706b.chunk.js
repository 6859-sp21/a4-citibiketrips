(this.webpackJsonpcitibike=this.webpackJsonpcitibike||[]).push([[0],{160:function(t,e){},244:function(t,e,i){},245:function(t,e,i){},256:function(t,e){},262:function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),o=i(90),l=i.n(o),d=(i(244),i(245),i(137)),u=i(192),r=i(193),s=i(194),g=i(206),m=i(134),c=i(72),h=i(297),b=i(301),v=i(292),f=i(299),S=i(109),p=i(125),j=i.n(p),w=i(198),y=i.n(w),k=i(35);j.a.workerClass=y.a;function C(t){var e=t.width,i=t.height,n=t.viewState,o=t.onViewStateChange,l=t.stations,d=t.trips,u=t.time_filter,r=t.loading,s=t.isPlaying,g=function(){var t={};return l.map((function(e){t[e.id]=0})),t},p=function(){var t=g();return d.forEach((function(e){e.start_minutes>=u[0]&&e.start_minutes<=u[1]&&(void 0===x?(t[e.end_id]+=1,t[e.start_id]-=1):e.start_id!==x&&e.end_id!==x||(t[e.start_id]-=1,t[e.end_id]+=1))})),t},j=[255,0,0],w=[0,255,0],y=[255,140,0],C=a.a.useState(!0),O=Object(c.a)(C,2),P=(O[0],O[1],a.a.useState(void 0)),_=Object(c.a)(P,2),x=_[0],L=_[1],M=a.a.useState(g()),H=Object(c.a)(M,2),A=H[0],D=H[1];a.a.useEffect((function(){D(p())}),[x,r,u]);var T=[new h.a({id:"column-stations",data:l,pickable:!0,extrude:!0,opacity:.8,radiusMaxPixels:15,radius:50,getPosition:function(t){return[t.longitude,t.latitude]},getFillColor:function(t){return 0===A[t.id]?y:A[t.id]>0?w:j},elevationScale:2,getElevation:function(t){return Math.abs(A[t.id])},onHover:function(t){var e=t.object;e?L(e.id):(L(void 0),D(p()))},onClick:function(t){t.object},autoHighlight:!1,updateTriggers:{getFillColor:[A],getElevation:[A]},transitions:{getFillColor:{duration:s?0:500,easing:S.b},getElevation:{duration:s?0:500,easing:S.b}}}),new b.a({id:"arc-layer",data:d,getSourcePosition:function(t){return t.start_position},getTargetPosition:function(t){return t.end_position},getSourceColor:function(t){return A[t.start_id]>0?w:j},getTargetColor:function(t){return A[t.end_id]>0?w:j},visible:x,getFilterValue:function(t){return[t.start_minutes,t.start_id]},filterRange:[[u[0],u[1]],[x,x]],onFilteredItemsChange:function(t){D(p())},updateTriggers:{getSourceColor:[u,x,A],getTargetColor:[u,x,A]},extensions:[new f.a({filterSize:2,countItems:!0})]})];return Object(k.jsx)("div",{children:Object(k.jsx)(m.b,{mapboxApiAccessToken:"pk.eyJ1IjoianpoYW5nNTYiLCJhIjoiY2tuMXhmNG44MTI1MzJ2bW9rbWhjNTM4YSJ9.Oukq6B1n9DOXpjfRZfUOJQ",width:e,height:i,viewState:n,onViewStateChange:o,mapStyle:"mapbox://styles/mapbox/dark-v9",children:Object(k.jsx)(v.a,{viewState:n,layers:T,getTooltip:function(t){var e=t.object;return e&&"      Station Name: ".concat(e.name,"\n      Net gain in bikes: ").concat(A[e.id])}})})})}var O={3186:{name:"Grove St PATH",latitude:40.71958611647166,longitude:-74.0431174635887},3195:{name:"Sip Ave",latitude:40.73089709786179,longitude:-74.06391263008119},3199:{name:"Newport Pkwy",latitude:40.728744799999994,longitude:-74.03210820000001},3792:{name:"Columbus Dr at Exchange Pl",latitude:40.71687,longitude:-74.03281},3185:{name:"City Hall",latitude:40.717732500000004,longitude:-74.04384499999999},3275:{name:"Columbus Drive",latitude:40.71835519823214,longitude:-74.03891444206238},3639:{name:"Harborside",latitude:40.71925170000001,longitude:-74.034234},3276:{name:"Marin Light Rail",latitude:40.71458403535893,longitude:-74.04281705617905},3202:{name:"Newport PATH",latitude:40.7272235,longitude:-74.03375890000001},3211:{name:"Newark Ave",latitude:40.72152515,longitude:-74.046304543},3213:{name:"Van Vorst Park",latitude:40.71848892,longitude:-74.047726625},3640:{name:"Journal Square",latitude:40.733670000000004,longitude:-74.0625},3187:{name:"Warren St",latitude:40.721123600000006,longitude:-74.03805095},3203:{name:"Hamilton Park",latitude:40.727595965999996,longitude:-74.044247311},3207:{name:"Oakland Ave",latitude:40.7376037,longitude:-74.05247829999999},3678:{name:"Fairmount Ave",latitude:40.72572613742557,longitude:-74.07195925712584},3194:{name:"McGinley Square",latitude:40.7253399253558,longitude:-74.06762212514876},3206:{name:"Hilltop",latitude:40.7311689,longitude:-74.0575736},3225:{name:"Baldwin at Montgomery",latitude:40.7236589,longitude:-74.0641943},3220:{name:"5 Corners Library",latitude:40.73496102000952,longitude:-74.05950307846071},3196:{name:"Riverview Park",latitude:40.7443187,longitude:-74.04399090000001},3272:{name:"Jersey & 3rd",latitude:40.723331586464354,longitude:-74.04595255851744},3269:{name:"Brunswick & 6th",latitude:40.726011729646245,longitude:-74.0503889322281},3638:{name:"Washington St",latitude:40.7242941,longitude:-74.0354826},3278:{name:"Monmouth and 6th",latitude:40.72568548362901,longitude:-74.0487903356552},3273:{name:"Manila & 1st",latitude:40.72165072487999,longitude:-74.04288411140442},3279:{name:"Dixon Mills",latitude:40.72163014263835,longitude:-74.04996782541275},3270:{name:"Jersey & 6th St",latitude:40.72528910781132,longitude:-74.04557168483734},3205:{name:"JC Medical Center",latitude:40.71653978099194,longitude:-74.0496379137039},3209:{name:"Brunswick St",latitude:40.7241765,longitude:-74.05065640000001},3267:{name:"Morris Canal",latitude:40.7124188237569,longitude:-74.03852552175522},3212:{name:"Christ Hospital",latitude:40.734785818,longitude:-74.050443636},3184:{name:"Paulus Hook",latitude:40.7141454,longitude:-74.0335519},3681:{name:"Grand St",latitude:40.71517767732029,longitude:-74.03768330812454},3679:{name:"Bergen Ave",latitude:40.72210378668603,longitude:-74.07145500183104},3483:{name:"Montgomery St",latitude:40.71942,longitude:-74.05099},3280:{name:"Astor Place",latitude:40.71928220070703,longitude:-74.07126188278198},3214:{name:"Essex Light Rail",latitude:40.712774200000005,longitude:-74.03648570000001},3791:{name:"Hoboken Ave at Monmouth St",latitude:40.73520838045357,longitude:-74.04696375131606},3481:{name:"York St",latitude:40.71649,longitude:-74.04105},3193:{name:"Lincoln Park",latitude:40.7246050998869,longitude:-74.07840594649316},3677:{name:"Glenwood Ave",latitude:40.72755146730012,longitude:-74.07106071710588},3268:{name:"Lafayette Park",latitude:40.71346382669195,longitude:-74.06285852193831},3281:{name:"Leonard Gordon Park",latitude:40.74590996631558,longitude:-74.05727148056029},3210:{name:"Pershing Field",latitude:40.742677141,longitude:-74.051788633},3201:{name:"Dey St",latitude:40.737711,longitude:-74.066921},3694:{name:"Jackson Square",latitude:40.71113,longitude:-74.0789},3192:{name:"Liberty Light Rail",latitude:40.711242299999995,longitude:-74.0557013},3198:{name:"Heights Elevator",latitude:40.748715945380226,longitude:-74.04044330120088},3277:{name:"Communipaw & Berry Lane",latitude:40.71435836870427,longitude:-74.06661093235016},3191:{name:"Union St",latitude:40.71821129999999,longitude:-74.08363940000001},3426:{name:"JCBS Depot",latitude:40.70965083364061,longitude:-74.06860113143921}},P=[{name:"Grove St PATH",latitude:40.71958611647166,longitude:-74.0431174635887,id:3186},{name:"Sip Ave",latitude:40.73089709786179,longitude:-74.06391263008119,id:3195},{name:"Newport Pkwy",latitude:40.728744799999994,longitude:-74.03210820000001,id:3199},{name:"Columbus Dr at Exchange Pl",latitude:40.71687,longitude:-74.03281,id:3792},{name:"City Hall",latitude:40.717732500000004,longitude:-74.04384499999999,id:3185},{name:"Columbus Drive",latitude:40.71835519823214,longitude:-74.03891444206238,id:3275},{name:"Harborside",latitude:40.71925170000001,longitude:-74.034234,id:3639},{name:"Marin Light Rail",latitude:40.71458403535893,longitude:-74.04281705617905,id:3276},{name:"Newport PATH",latitude:40.7272235,longitude:-74.03375890000001,id:3202},{name:"Newark Ave",latitude:40.72152515,longitude:-74.046304543,id:3211},{name:"Van Vorst Park",latitude:40.71848892,longitude:-74.047726625,id:3213},{name:"Journal Square",latitude:40.733670000000004,longitude:-74.0625,id:3640},{name:"Warren St",latitude:40.721123600000006,longitude:-74.03805095,id:3187},{name:"Hamilton Park",latitude:40.727595965999996,longitude:-74.044247311,id:3203},{name:"Oakland Ave",latitude:40.7376037,longitude:-74.05247829999999,id:3207},{name:"Fairmount Ave",latitude:40.72572613742557,longitude:-74.07195925712584,id:3678},{name:"McGinley Square",latitude:40.7253399253558,longitude:-74.06762212514876,id:3194},{name:"Hilltop",latitude:40.7311689,longitude:-74.0575736,id:3206},{name:"Baldwin at Montgomery",latitude:40.7236589,longitude:-74.0641943,id:3225},{name:"5 Corners Library",latitude:40.73496102000952,longitude:-74.05950307846071,id:3220},{name:"Riverview Park",latitude:40.7443187,longitude:-74.04399090000001,id:3196},{name:"Jersey & 3rd",latitude:40.723331586464354,longitude:-74.04595255851744,id:3272},{name:"Brunswick & 6th",latitude:40.726011729646245,longitude:-74.0503889322281,id:3269},{name:"Washington St",latitude:40.7242941,longitude:-74.0354826,id:3638},{name:"Monmouth and 6th",latitude:40.72568548362901,longitude:-74.0487903356552,id:3278},{name:"Manila & 1st",latitude:40.72165072487999,longitude:-74.04288411140442,id:3273},{name:"Dixon Mills",latitude:40.72163014263835,longitude:-74.04996782541275,id:3279},{name:"Jersey & 6th St",latitude:40.72528910781132,longitude:-74.04557168483734,id:3270},{name:"JC Medical Center",latitude:40.71653978099194,longitude:-74.0496379137039,id:3205},{name:"Brunswick St",latitude:40.7241765,longitude:-74.05065640000001,id:3209},{name:"Morris Canal",latitude:40.7124188237569,longitude:-74.03852552175522,id:3267},{name:"Christ Hospital",latitude:40.734785818,longitude:-74.050443636,id:3212},{name:"Paulus Hook",latitude:40.7141454,longitude:-74.0335519,id:3184},{name:"Grand St",latitude:40.71517767732029,longitude:-74.03768330812454,id:3681},{name:"Bergen Ave",latitude:40.72210378668603,longitude:-74.07145500183104,id:3679},{name:"Montgomery St",latitude:40.71942,longitude:-74.05099,id:3483},{name:"Astor Place",latitude:40.71928220070703,longitude:-74.07126188278198,id:3280},{name:"Essex Light Rail",latitude:40.712774200000005,longitude:-74.03648570000001,id:3214},{name:"Hoboken Ave at Monmouth St",latitude:40.73520838045357,longitude:-74.04696375131606,id:3791},{name:"York St",latitude:40.71649,longitude:-74.04105,id:3481},{name:"Lincoln Park",latitude:40.7246050998869,longitude:-74.07840594649316,id:3193},{name:"Glenwood Ave",latitude:40.72755146730012,longitude:-74.07106071710588,id:3677},{name:"Lafayette Park",latitude:40.71346382669195,longitude:-74.06285852193831,id:3268},{name:"Leonard Gordon Park",latitude:40.74590996631558,longitude:-74.05727148056029,id:3281},{name:"Pershing Field",latitude:40.742677141,longitude:-74.051788633,id:3210},{name:"Dey St",latitude:40.737711,longitude:-74.066921,id:3201},{name:"Jackson Square",latitude:40.71113,longitude:-74.0789,id:3694},{name:"Liberty Light Rail",latitude:40.711242299999995,longitude:-74.0557013,id:3192},{name:"Heights Elevator",latitude:40.748715945380226,longitude:-74.04044330120088,id:3198},{name:"Communipaw & Berry Lane",latitude:40.71435836870427,longitude:-74.06661093235016,id:3277},{name:"Union St",latitude:40.71821129999999,longitude:-74.08363940000001,id:3191},{name:"JCBS Depot",latitude:40.70965083364061,longitude:-74.06860113143921,id:3426}],_=i.p+"static/media/all2020.6942c60b.csv",x=i(303),L=i(48),M=i(300),H=i(295),A=i(201),D=i.n(A),T=i(202),F=i.n(T),J=Object(x.a)("div")({position:"absolute",zIndex:1,bottom:"40px",width:"100%",display:"flex",justifyContent:"center",alignItems:"center"}),B=Object(L.a)({root:{marginLeft:12,width:"40%"},valueLabel:{"& span":{background:"none",color:"#ff0000"}}})(M.a);function V(t){var e=t.min,i=t.max,a=t.value,o=(t.animationSpeed,t.onChange),l=t.formatLabel,d=(t.togglePlaying,Object(n.useState)(!1)),u=Object(c.a)(d,2),r=(u[0],u[1],Object(n.useState)({})),s=(Object(c.a)(r,1)[0],Object(n.useState)(!0)),g=Object(c.a)(s,2),m=g[0],h=g[1],b=Object(n.useState)(a[1]-a[0]),v=Object(c.a)(b,2),f=v[0],S=v[1],p=function(t){var n=[a[0],a[1]];m?((n=t[1]===n[1]?[t[0],t[0]+f]:[t[1]-f,t[1]])[0]<e&&(n=[e,e+f]),n[1]>i&&(n=[i-f,i]),o(n)):o(t)};return Object(k.jsxs)(J,{children:[Object(k.jsx)(H.a,{color:"secondary",onClick:function(){h(!m),S(a[1]-a[0])},children:m?Object(k.jsx)(D.a,{title:"Lock Time Filter"}):Object(k.jsx)(F.a,{title:"Open Time Filter"})}),Object(k.jsx)(B,{color:"secondary",min:e,max:i,value:a,onChange:function(t,e){return p(e)},valueLabelDisplay:"on",valueLabelFormat:l})]})}var E={latitude:40.725779443680345,longitude:-74.05589375312678,zoom:13,bearing:.8015740858150702,pitch:40.9},G=function(t){Object(s.a)(i,t);var e=Object(g.a)(i);function i(t){var n;return Object(u.a)(this,i),(n=e.call(this,t)).setViewState=function(t){n.setState({viewState:t})},n.setFilter=function(t){n.setState({time_filter:t})},n.formatLabel=function(t){var e=("00"+Math.floor(t/60)).slice(-2),i=("00"+t%60).slice(-2);return"".concat(e,":").concat(i)},n.handleChangeViewState=function(t){var e=t.viewState;n.setViewState(e)},n.handleFlyTo=function(t){n.setViewState(Object(d.a)(Object(d.a)(Object(d.a)({},n.state.viewState),t),{},{transitionDuration:2e3,transitionInterpolator:new m.a}))},n.togglePlaying=function(){n.setState({playing:!n.state.playing})},n.state={viewState:E,station_info:O,stations:P,trips:[],loading:!0,time_filter:[600,780],playing:!1},n}return Object(r.a)(i,[{key:"componentDidMount",value:function(){var t=this;Object(S.a)(_,(function(t){var e=new Date(t.starttime);return{duration:t.tripduration,start_datetime:t.starttime,start_time:e.toTimeString(),start_minutes:60*e.getHours()+e.getMinutes(),start_id:+t["start station id"],end_id:+t["end station id"],start_position:[+t["start station longitude"],+t["start station latitude"]],end_position:[+t["end station longitude"],+t["end station latitude"]]}})).then((function(e){var i=new Date("01-01-2020"),n=new Date("05-01-2020"),a=e.filter((function(e){return null!=e.start_position[0]&&null!=e.start_position[1]&&null!=e.end_position[0]&&null!=e.end_position[1]&&e.start_id in t.state.station_info&&e.end_id in t.state.station_info&&new Date(e.start_datetime)>i&&new Date(e.start_datetime)<n}));t.setState({trips:a,loading:!1})}))}},{key:"render",value:function(){return Object(k.jsxs)("div",{children:[Object(k.jsx)(C,{width:"100vw",height:"100vh",viewState:this.state.viewState,onViewStateChange:this.handleChangeViewState,stations:this.state.stations,trips:this.state.trips,toggle:this.state.toggle,time_filter:this.state.time_filter,loading:this.state.loading,isPLaying:this.state.playing}),Object(k.jsx)(V,{min:0,max:1439,value:this.state.time_filter,animationSpeed:20,formatLabel:this.formatLabel,onChange:this.setFilter,togglePlaying:this.togglePlaying})]})}}]),i}(n.Component),N=function(){return Object(k.jsx)(G,{})},I=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,304)).then((function(e){var i=e.getCLS,n=e.getFID,a=e.getFCP,o=e.getLCP,l=e.getTTFB;i(t),n(t),a(t),o(t),l(t)}))};l.a.render(Object(k.jsx)(a.a.StrictMode,{children:Object(k.jsx)(N,{})}),document.getElementById("root")),I()}},[[262,1,2]]]);
//# sourceMappingURL=main.9690706b.chunk.js.map